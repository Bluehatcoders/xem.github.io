<!doctype html>
<meta charset=utf-8>
<meta name="viewport" content="width=device-width, user-scalable=no">
<html>
<head>
<link rel=stylesheet href="../style.css?v=4">
<title>Maxime Euzi√®re</title>
</head>
<body class=large>

<div class="wrapper">

<header></header>

<div id=menu></div>

<main>

<style>
iframe { min-height: 800px }
</style>

<div class=section id=webgl_guide>
<h2>WebGL guide</h2>
<h3>october 2019 - WIP</h3>
  
<h4>Intro</h4>

<p>This page summarizes the book <a href="https://www.oreilly.com/library/view/webgl-programming-guide/9780133364903/ch01.html">WebGL Programming Guide</a> with tiny, editable demos.
<p>All the code is available <a href="https://github.com/xem/webgl-guide">on Github</a>.
<p>For WebGL raymarching and distance functions, check out <a href="webgl_quest.html>Webgl quest</a> and <a href="webgl_quest_2.html>Webgl quest 2</a>.

<h4>Definitions and notations</h4>

<p>In WebGL:
<ul>
<li>a vertex is a point in 3D space (coordinates: x, y, z)
<li>a fragment is where the scene is rendered (typically, the pixels on your screen)
<li>two programs (vertex shader and fragment shader) are written in GLSL language to represent them
<li>these shaders are compiled and linked into a program, controlled by JS to render things on a WebGL canvas context
<li>the x/y coordinates in this canvas context are in the range [-1:1] (the center is at (0:0), the top-right corner is at (1:1)) 
<li>a float is a number written with at least one decimal (ex: 0.0, 0.1, 1.0, ...)
<li>a vec4 is an array of 4 floats representing a position (x, y, z, 1.0), a color (r, g, b, alpha) or anything you want
<li>an attribute is a global variable passed by JS to the fragment shader
<li>an uniform is a global constant passed by JS to all the shaders
<li>a varying is (todo)
<li>...
</ul>

<h4>How to draw points</h4>
<i>(from chapter 2 of the book)</i>

<p>This is the simplest possible WebGL program, drawing a red point in the middle of the canvas.
<iframe height=800 src="//xem.github.io/webgl-guide/visualizer/#PGNhbnZhcyBpZD0iY2FudmFzIiB3aWR0aD00MDAgaGVpZ2h0PTQwMD48L2NhbnZhcz4KPHNjcmlwdD4KLy8gR2V0IHRoZSBXZWJHTCByZW5kZXJpbmcgY29udGV4dAovLyBUaGUgWCBhbmQgWSBjb29yZGluYXRlcyBhcmUgZGVmaW5lZCBiZXR3ZWVuIC0xLjAgYW5kIDEuMApnbCA9IGNhbnZhcy5nZXRDb250ZXh0KCJ3ZWJnbCIpOwoKLy8gVmVydGV4IHNoYWRlcjoKLy8gRGVzY3JpYmVzIHRoZSBhdHRyaWJ1dGVzIG9mIHBvaW50cyBpbiBzcGFjZXMgKHBvc2l0aW9uLCBzaXplLCAuLi4pCi8vIC0gZ2xfUG9zaXRpb246IHZlYzQoeCwgeSwgeiwgMS4wKQovLyAtIGdsX1BvaW50U2l6ZSBmbG9hdAp2YXIgdnNoYWRlciA9IGAKdm9pZCBtYWluKCkgewogIGdsX1Bvc2l0aW9uID0gdmVjNCgwLjAsIDAuMCwgMC4wLCAxLjApOwogIGdsX1BvaW50U2l6ZSA9IDEwLjA7Cn1gOwoKLy8gRnJhZ21lbnQgc2hhZGVyOgovLyBEZXNjcmliZXMgaG93IGVhY2ggcGl4ZWwgcmVuZGVyZWQgYnkgdGhlIHZlcnRleCBzaGFkZXIgaXMgZHJhd24gKGNvbG9yLCBsaWdodGluZywgLi4uKQovLyAtIGdsX2ZyYWdDb2xvcjogdmVjNChyLCBnLCBiLCBhbHBoYSkKdmFyIGZzaGFkZXIgPSBgCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0Owp2b2lkIG1haW4oKSB7CiAgZ2xfRnJhZ0NvbG9yID0gdmVjNCgxLjAsIDAuMCwgMC4wLCAxLjApOwp9YDsKCi8vIE1ha2UgYSBwcm9ncmFtIGZyb20gdGhlc2Ugc2hhZGVycyBhbmQgdXNlIGl0IAp2YXIgdnMgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7CmdsLnNoYWRlclNvdXJjZSh2cywgdnNoYWRlcik7CmdsLmNvbXBpbGVTaGFkZXIodnMpOwoKdmFyIGZzID0gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUik7CmdsLnNoYWRlclNvdXJjZShmcywgZnNoYWRlcik7CmdsLmNvbXBpbGVTaGFkZXIoZnMpOwoKdmFyIHByb2dyYW0gPSBnbC5jcmVhdGVQcm9ncmFtKCk7CmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCB2cyk7CmdsLmF0dGFjaFNoYWRlcihwcm9ncmFtLCBmcyk7CmdsLmxpbmtQcm9ncmFtKHByb2dyYW0pOwpnbC51c2VQcm9ncmFtKHByb2dyYW0pOwoKLy8gQ2xlYXIgdGhlIGNhbnZhcydzIGNvbG9yIGJ1ZmZlciwgaW4gYmxhY2sKZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApOwpnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTsKCi8vIERyYXcgcG9pbnRzIG9uIHRoZSBjYW52YXMncyBjb2xvciBidWZmZXIKLy8gLSBtb2RlOiBnbC5QT0lOVFMgLyBMSU5FUyAvIExJTkVfU1RSSVAgLyBMSU5FX0xPT1AgLyBUUklBTkdMRVMgLyBUUklBTkdMRV9TVFJJUCAvIFRSSUFOR0xFX0ZBTgovLyAtIHN0YXJ0aW5nIHBvaW50Ci8vIC0gbnVtYmVyIG9mIHBvaW50cyB0byBkcmF3CmdsLmRyYXdBcnJheXMoZ2wuUE9JTlRTLCAwLCAxKTsKPC9zY3JpcHQ+"></iframe>

<p>The same demo, but the position, size and color of the point is set by JS, and not hardcoded.
<iframe height=950 src="//xem.github.io/webgl-guide//visualizer/#PGNhbnZhcyBpZD0iY2FudmFzIiB3aWR0aD00MDAgaGVpZ2h0PTQwMD48L2NhbnZhcz4KPHNjcmlwdD4KZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wiKTsKCi8vIFZlcnRleCBzaGFkZXI6Ci8vIGFuIGF0dHJpYnV0ZSAobGlrZSBwb3MgLyBzaXplKSBpcyBhIGdsb2JhbCB2YXJpYWJsZSB0aGF0IGNhbiBiZSBzZXQgYnkgSlMKLy8gb25seSB0aGUgdmVydGV4IHNoYWRlciBjYW4gYWNjZXNzIGl0CnZhciB2c2hhZGVyID0gYAphdHRyaWJ1dGUgdmVjNCBwb3M7CmF0dHJpYnV0ZSBmbG9hdCBzaXplOwp2b2lkIG1haW4oKSB7CiAgZ2xfUG9zaXRpb24gPSBwb3M7CiAgZ2xfUG9pbnRTaXplID0gc2l6ZTsKfWA7CgovLyBGcmFnbWVudCBzaGFkZXI6Ci8vIGFuIHVuaWZvcm0gKGxpa2UgY29sb3IpIGlzIGEgZ2xvYmFsIGNvbnN0YW50IHRoYXQgY2FuIGJlIHNldCBieSBKUwovLyBhbGwgc2hhZGVycyBjYW4gcmVhZCBpdAp2YXIgZnNoYWRlciA9IGAKcHJlY2lzaW9uIG1lZGl1bXAgZmxvYXQ7CnVuaWZvcm0gdmVjNCBjb2xvcjsKdm9pZCBtYWluKCkgewogIGdsX0ZyYWdDb2xvciA9IGNvbG9yOwp9YDsKCi8vIENvbXBpbGUgc2hhZGVycyBhbmQgcHJvZ3JhbQp2YXIgdnMgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuVkVSVEVYX1NIQURFUik7CmdsLnNoYWRlclNvdXJjZSh2cywgdnNoYWRlcik7CmdsLmNvbXBpbGVTaGFkZXIodnMpOwp2YXIgZnMgPSBnbC5jcmVhdGVTaGFkZXIoZ2wuRlJBR01FTlRfU0hBREVSKTsKZ2wuc2hhZGVyU291cmNlKGZzLCBmc2hhZGVyKTsKZ2wuY29tcGlsZVNoYWRlcihmcyk7CnZhciBwcm9ncmFtID0gZ2wuY3JlYXRlUHJvZ3JhbSgpOwpnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgdnMpOwpnbC5hdHRhY2hTaGFkZXIocHJvZ3JhbSwgZnMpOwpnbC5saW5rUHJvZ3JhbShwcm9ncmFtKTsKZ2wudXNlUHJvZ3JhbShwcm9ncmFtKTsKCi8vIFNlbGVjdCB0aGUgcG9zIGF0dHJpYnV0ZSBhbmQgc2V0IGl0cyB2YWx1ZQovLyB3ZSB1c2UgdmVydGV4QXR0cmliM2YgdG8gb25seSBzZXQgdGhlIHZhbHVlcyB3ZSBjYXJlIGFib3V0IGluIHBvcyAoeCwgeSwgeikKLy8gdGhlIGRlZmF1bHQgdmFsdWVzIG9mIGEgdmVjNCBhdHRyaWJ1dGUgYXJlOiAoMC4wLCAwLjAsIDAuMCwgMS4wKQovLyBzbyBhbGwgdGhlc2UgZm9ybXMgYXJlIGVxdWl2YWxlbnQ6Ci8vIC0gZ2wudmVydGV4QXR0cmliMWYocG9zLCAwLjApCi8vIC0gZ2wudmVydGV4QXR0cmliMmYocG9zLCAwLjAsIDAuMCkKLy8gLSBnbC52ZXJ0ZXhBdHRyaWIzZihwb3MsIDAuMCwgMC4wLCAwLjApCi8vIC0gZ2wudmVydGV4QXR0cmliNGYocG9zLCAwLjAsIDAuMCwgMC4wLCAxLjApCnZhciBwb3MgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAncG9zJyk7CmdsLnZlcnRleEF0dHJpYjNmKHBvcywgMC4wLCAwLjAsIDAuMCk7CgovLyBTZWxlY3QgdGhlIHNpemUgYXR0cmlidXRlIGFuZCBzZXQgaXRzIHZhbHVlCnZhciBzaXplID0gZ2wuZ2V0QXR0cmliTG9jYXRpb24ocHJvZ3JhbSwgJ3NpemUnKTsKZ2wudmVydGV4QXR0cmliMWYoc2l6ZSwgMTAuMCk7CgovLyBTZWxlY3QgdGhlIGNvbG9yIHVuaWZvcm0gYW5kIHNldCBpdHMgdmFsdWUKdmFyIGNvbG9yID0gZ2wuZ2V0VW5pZm9ybUxvY2F0aW9uKHByb2dyYW0sICJjb2xvciIpOwpnbC51bmlmb3JtNGYoY29sb3IsIDEuMCwgMC4wLCAwLjAsIDEuMCk7CgovLyBSZW5kZXIKZ2wuY2xlYXJDb2xvcigwLjAsIDAuMCwgMC4wLCAxLjApOwpnbC5jbGVhcihnbC5DT0xPUl9CVUZGRVJfQklUKTsKZ2wuZHJhd0FycmF5cyhnbC5QT0lOVFMsIDAsIDEpOwo8L3NjcmlwdD4="></iframe>

<p>Add a new point with a different color everytime the canvas is clicked.
<iframe height=1100 src="//xem.github.io/webgl-guide/visualizer/#PGNhbnZhcyBpZD0iY2FudmFzIiB3aWR0aD00MDAgaGVpZ2h0PTQwMD48L2NhbnZhcz4KPHNjcmlwdD4KZ2wgPSBjYW52YXMuZ2V0Q29udGV4dCgid2ViZ2wiKTsKCi8vIFZlcnRleCBzaGFkZXIKdmFyIHZzaGFkZXIgPSBgCmF0dHJpYnV0ZSB2ZWM0IHBvczsKYXR0cmlidXRlIGZsb2F0IHNpemU7CnZvaWQgbWFpbigpIHsKICBnbF9Qb3NpdGlvbiA9IHBvczsKICBnbF9Qb2ludFNpemUgPSBzaXplOwp9YDsKCi8vIEZyYWdtZW50IHNoYWRlcjoKdmFyIGZzaGFkZXIgPSBgCnByZWNpc2lvbiBtZWRpdW1wIGZsb2F0Owp1bmlmb3JtIHZlYzQgY29sb3I7CnZvaWQgbWFpbigpIHsKICBnbF9GcmFnQ29sb3IgPSBjb2xvcjsKfWA7CgovLyBDb21waWxlIHNoYWRlcnMgYW5kIHByb2dyYW0KdmFyIHZzID0gZ2wuY3JlYXRlU2hhZGVyKGdsLlZFUlRFWF9TSEFERVIpOwpnbC5zaGFkZXJTb3VyY2UodnMsIHZzaGFkZXIpOwpnbC5jb21waWxlU2hhZGVyKHZzKTsKdmFyIGZzID0gZ2wuY3JlYXRlU2hhZGVyKGdsLkZSQUdNRU5UX1NIQURFUik7CmdsLnNoYWRlclNvdXJjZShmcywgZnNoYWRlcik7CmdsLmNvbXBpbGVTaGFkZXIoZnMpOwp2YXIgcHJvZ3JhbSA9IGdsLmNyZWF0ZVByb2dyYW0oKTsKZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIHZzKTsKZ2wuYXR0YWNoU2hhZGVyKHByb2dyYW0sIGZzKTsKZ2wubGlua1Byb2dyYW0ocHJvZ3JhbSk7CmdsLnVzZVByb2dyYW0ocHJvZ3JhbSk7CgovLyBHZXQgc2hhZGVyIGF0dHJpYnV0ZXMKdmFyIHBvcyA9IGdsLmdldEF0dHJpYkxvY2F0aW9uKHByb2dyYW0sICdwb3MnKTsKdmFyIHNpemUgPSBnbC5nZXRBdHRyaWJMb2NhdGlvbihwcm9ncmFtLCAnc2l6ZScpOwp2YXIgY29sb3IgPSBnbC5nZXRVbmlmb3JtTG9jYXRpb24ocHJvZ3JhbSwgJ2NvbG9yJyk7CgovLyBDbGVhcgpnbC5jbGVhckNvbG9yKDAuMCwgMC4wLCAwLjAsIDEuMCk7CmdsLmNsZWFyKGdsLkNPTE9SX0JVRkZFUl9CSVQpOwoKLy8gTGlzdCBvZiBwb2ludHMgdG8gZHJhdwpwb2ludHMgPSBbXTsKCi8vIENsaWNrIGxpc3RlbmVyCmNhbnZhcy5vbmNsaWNrID0gZSA9PiB7CgogIC8vIE1vdXNlIGNvb3JkaW5hdGVzIG9uIGNhbnZhcwogIHZhciB4ID0gZS5jbGllbnRYIC0gY2FudmFzLm9mZnNldExlZnQ7CiAgdmFyIHkgPSBlLmNsaWVudFkgLSBjYW52YXMub2Zmc2V0VG9wOwogIAogIC8vIE1vdXNlIGNvb3JkaW5hdGVzIGluIFstMToxXSByYW5nZQogIHggPSAoMiAqIHggLyBjYW52YXMud2lkdGgpIC0gMTsKICB5ID0gKC0yICogeSAvIGNhbnZhcy5oZWlnaHQpICsgMTsKICAKICAvLyBBZGQgcG9pbnQgaW4gbGlzdAogIHBvaW50cy5wdXNoKFt4LCB5IF0pOwogIAogIC8vIENsZWFyCiAgZ2wuY2xlYXIoZ2wuQ09MT1JfQlVGRkVSX0JJVCk7CiAgCiAgLy8gRHJhdyBhbGwgcG9pbnRzCiAgLy8gVGhlIGNvbG9yIGlzIGNvbXB1dGVkIHVzaW5nIHRoZSBwb2ludHMgY29vcmRpbmF0ZXMKICBmb3IoaSBpbiBwb2ludHMpewogICAgZ2wudmVydGV4QXR0cmliM2YocG9zLCBwb2ludHNbaV1bMF0sIHBvaW50c1tpXVsxXSwgMC4wKTsKICAgIGdsLnZlcnRleEF0dHJpYjFmKHNpemUsIDEwLjApOwogICAgZ2wudW5pZm9ybTRmKGNvbG9yLCAocG9pbnRzW2ldWzBdKzEpLzIsIChwb2ludHNbaV1bMV0rMSkvMiwgMC41LCAxLjApOwogICAgZ2wuZHJhd0FycmF5cyhnbC5QT0lOVFMsIDAsIDEpOwogIH0KfQo8L3NjcmlwdD4="></iframe>







</div>

</main>

</div>

<footer></footer>

<script src="../ui.js"></script>
<script>
header();
footer();
menu();
</script>

</body>
</html>